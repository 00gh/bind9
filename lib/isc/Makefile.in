
srcdir =	@srcdir@
VPATH =		@srcdir@
top_srcdir =	@top_srcdir@

@BIND9_VERSION@

CINCLUDES =	-I${srcdir}/unix/include \
		-I${srcdir}/pthreads/include \
		-I${srcdir}/include
CDEFINES =
CWARNINGS =

OBJS =		assertions.o buffer.o error.o heap.o lex.o mem.o result.o \
		rwlock.o socket.o symtab.o task.o timer.o version.o \
		unix/time.o \
		pthreads/condition.o

SUBDIRS =	include unix pthreads
TARGETS =	timestamp

@BIND9_MAKE_RULES@

version.o: version.c
	${CC} ${ALL_CFLAGS} -DVERSION=\"${VERSION}\" -c $<

libisc.a: ${OBJS}
	${AR} cruv libisc.a ${OBJS}

timestamp: libisc.a
	${RANLIB} libisc.a
	touch timestamp

installdirs:
	if [ ! -d ${libdir} ]; then \
		mkdir ${libdir}; \
	fi

install:: timestamp installdirs
	${INSTALL_DATA} libisc.a ${libdir}

clean distclean::
	rm -f libisc.a timestamp
