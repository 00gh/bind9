
srcdir =	@srcdir@
VPATH =		@srcdir@
top_srcdir =	@top_srcdir@
prefix =	@prefix@
exec_prefix =	@exec_prefix@
libdir =	@libdir@

@SET_MAKE@

@BIND9_VERSION@

CC = 		@CC@
CFLAGS =	@CFLAGS@
CINCLUDES =	-I${srcdir}/unix/include \
		-I${srcdir}/pthreads/include \
		-I${srcdir}/include
CDEFINES =
CWARNINGS =
STD_CINCLUDES =	@STD_CINCLUDES@
STD_CDEFINES =	@STD_CDEFINES@
STD_CWARNINGS =	@STD_CWARNINGS@

AR =		ar
RANLIB =	@RANLIB@

INSTALL =	@INSTALL@
INSTALL_DATA =	@INSTALL_DATA@

OBJS =		assertions.o buffer.o error.o heap.o mem.o result.o rwlock.o \
		socket.o task.o timer.o version.o \
		unix/time.o \
		pthreads/condition.o

SUBDIRS =	include unix pthreads
TARGETS =	timestamp

@BIND9_MAKE_RULES@

version.o: version.c
	${CC} ${ALL_CFLAGS} -DVERSION=\"${VERSION}\" -c $<

libisc.a: ${OBJS}
	${AR} cruv libisc.a ${OBJS}

timestamp: libisc.a
	${RANLIB} libisc.a
	touch timestamp

installdirs:
	if [ ! -d ${libdir} ]; then \
		mkdir ${libdir}; \
	fi

install:: timestamp installdirs
	${INSTALL_DATA} libisc.a ${libdir}

clean::
	rm -f libisc.a timestamp
