# Copyright (C) 1998, 1999  Internet Software Consortium.
# 
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
# 
# THE SOFTWARE IS PROVIDED "AS IS" AND INTERNET SOFTWARE CONSORTIUM DISCLAIMS
# ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES
# OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL INTERNET SOFTWARE
# CONSORTIUM BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
# DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
# PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
# ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
# SOFTWARE.

srcdir =	@srcdir@
VPATH =		@srcdir@
top_srcdir =	@top_srcdir@

CINCLUDES =	-I../../lib/isc/unix/include \
		-I${srcdir}/../../lib/isc/unix/include \
		-I${srcdir}/../../lib/isc/pthreads/include \
		-I${srcdir}/../../lib/isc/include \
		-I../../lib/dns/include \
		-I${srcdir}/../../lib/dns/include \
		-I${srcdir}/../../lib/dns/sec/dst/include

CDEFINES =
CWARNINGS =

DNSLIBS =	../../lib/dns/libdns.@A@
ISCLIBS =	../../lib/isc/libisc.@A@

DNSDEPLIBS =	../../lib/dns/libdns.@A@
ISCDEPLIBS =	../../lib/isc/libisc.@A@

LIBS =		@LIBS@

SUBDIRS = master names rbt tasks db timers mem dst

# Alphabetically
TARGETS =	compress_test \
		db_test \
		dispatch_tcp_test \
		dispatch_test \
		keygen \
		lex_test \
		log_test \
		master_test \
		mempool_test \
		name_test \
		nxtify \
		rbt_test \
		rdata_test \
		res_test \
		rwlock_test \
		sdig \
		serial_test \
		shutdown_test \
		signer \
		sock_test \
		sym_test \
		task_test \
		timer_test \
		wire_test \
		zone_test

# Alphabetically
SRCS =		compress_test.c \
		db_test.c \
		dispatch_tcp_test.c \
		dispatch_test.c \
		keygen.c \
		lex_test.c \
		log_test.c \
		master_test.c \
		mempool_test.c \
		name_test.c \
		nxtify.c \
		printmsg.c \
		rbt_test.c \
		rdata_test.c \
		res_test.c \
		rwlock_test.c \
		sdig.c \
		serial_test.c \
		shutdown_test.c \
		signer.c \
		sock_test.c \
		sym_test.c \
		task_test.c \
		timer_test.c \
		wire_test.c \
		zone_test.c

@BIND9_MAKE_RULES@

sdig: sdig.o printmsg.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ sdig.o printmsg.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

nxtify: nxtify.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ nxtify.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

signer: signer.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ signer.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

keygen: keygen.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ keygen.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

res_test: res_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ res_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

lex_test: lex_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ lex_test.o \
		${ISCLIBS} ${LIBS}

log_test: log_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ log_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

name_test: name_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ name_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

sock_test: sock_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ sock_test.o \
		${ISCLIBS} ${LIBS}

sym_test: sym_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ sym_test.o \
		${ISCLIBS} ${LIBS}

task_test: task_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ task_test.o \
		${ISCLIBS} ${LIBS}

shutdown_test: shutdown_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ shutdown_test.o \
		${ISCLIBS} ${LIBS}

timer_test: timer_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ timer_test.o \
		${ISCLIBS} ${LIBS}

rbt_test: rbt_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ rbt_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

rdata_test: rdata_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ rdata_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

rwlock_test: rwlock_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ rwlock_test.o \
		${ISCLIBS} ${LIBS}

wire_test: wire_test.o printmsg.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ wire_test.o printmsg.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

master_test: master_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ master_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

db_test: db_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ db_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

compress_test: compress_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ compress_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

mempool_test: mempool_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ mempool_test.o \
		${ISCLIBS} ${LIBS}

serial_test: serial_test.o ${ISCDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ serial_test.o \
		${ISCLIBS} ${LIBS}

zone_test: zone_test.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ zone_test.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

dispatch_test: dispatch_test.o printmsg.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ dispatch_test.o printmsg.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

dispatch_tcp_test: dispatch_tcp_test.o printmsg.o ${ISCDEPLIBS} ${DNSDEPLIBS}
	${LIBTOOL} ${CC} ${CFLAGS} -o $@ dispatch_tcp_test.o printmsg.o \
		${DNSLIBS} ${ISCLIBS} ${LIBS}

clean distclean::
	rm -f ${TARGETS}
	rm -f t_journal
